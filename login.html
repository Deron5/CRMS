<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>CRMS Login</title>
    <link rel="stylesheet" href="main.css">
    <style>
        #form {
            grid-template-rows: min-content 1fr;

        }
    </style>
</head>

<body class="bg-slate-200 h-full grid justify-center items-center">
    <div id="form" class="bg-white w-96 h-96 grid grid-cols-1 mt-24">
        <div class="text-violet-500 text-3xl mt-8 ml-auto mr-auto">Login Form</div>
        <form class="flex flex-col mt-6" onsubmit="formSubmit(event)">
            <div class="flex flex-col self-center">
                <label for="email">
                    Email
                </label>
                <input  type="text" id="email" name="email" required class="shadow-blue-100 w-60 border-solid border-2 border-indigo-300 focus:outline-indigo-300 focus:outline-2">
            </div>
            <br>
            <div class="flex flex-col self-center">
                <label for="password">
                    Password
                </label>
                <input type="password" id="password" name="password" required class="shadow-blue-100 w-60 border-solid border-2 border-indigo-300 focus:outline-indigo-300 focus:outline-2">
            </div>
            <br>
            <div class="flex justify-center h-12 gap-10 m-4">
                <input type="submit" value="Login"
                    class="bg-violet-400 hover:bg-violet-500 text-white font-bold py-2 px-4 border border-purple-200 rounded">
                <input type="button" value="Register" onclick="window.location.href = './register.html'"
                    class="bg-violet-400 hover:bg-violet-500 text-white font-bold py-2 px-4 border border-purple-200 rounded">
            </div>
        </form>
    </div>

    <script>
        function formSubmit(event) {
            event.preventDefault();

            fetch('rentals',{
                method: 'POST',
                body: JSON.stringify({func:"login",params:{email:document.getElementById("email").value,password:document.getElementById("password").value}}),
            }).then((res)=>res.json()).then(data=>{
                console.log(data);
                window.location.href = data["redirect"];
            });


        }

    </script>
</body>

</html>